{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\geral\\\\Documents\\\\csp3-b335-jove-bonafe\\\\csp3-b335-jove-bonafe\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { Form, Button } from 'react-bootstrap';\nimport { useState, useEffect, useContext } from 'react';\nimport UserContext from '../UserContext';\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  // State hooks to store the values of the input fields\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  // State to determine whether submit button is enabled or not\n  const [isActive, setIsActive] = useState(true);\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n\n  // useEffect() will be triggered every time the state of email and password changes\n  useEffect(() => {\n    // Validation to enable submit button when all fields are populated and both passwords match\n    if (email !== '' && password !== '') {\n      setIsActive(true);\n    } else {\n      setIsActive(false);\n    }\n  }, [email, password]);\n  function authenticate(e) {\n    // Prevents page redirection via form submission\n    e.preventDefault();\n    fetch('http://localhost:4004/b4/users/login', {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      // successful login\n      if (data.access) {\n        localStorage.setItem('access', data.access);\n        // setUser(data); // user = {access: adskjaslkdqwk }\n        retrieveUserDetails(data.access);\n        alert(`You are now logged in`);\n      } else if (data.error == \"No Email Found\") {\n        alert(`Email not found`);\n      } else {\n        alert(data.message);\n      }\n    });\n    // Clear input fields after submission\n    setEmail('');\n    setPassword('');\n  }\n  const retrieveUserDetails = token => {\n    fetch(\"http://localhost:4004/b4/users/details\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      setUser({\n        id: data._id,\n        isAdmin: data.isAdmin\n      });\n      console.log(user);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: e => authenticate(e),\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-5 text-center\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"userEmail\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Email address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"email\",\n        placeholder: \"Enter email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"password\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }, this), isActive ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      id: \"submitBtn\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"danger\",\n      type: \"submit\",\n      id: \"submitBtn\",\n      disabled: true,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }, this);\n}\n_s(Login, \"EnSFU1Zd4Dogv4Ehp+fZtw1o4Ls=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Form","Button","useState","useEffect","useContext","UserContext","Navigate","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","isActive","setIsActive","user","setUser","authenticate","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","access","localStorage","setItem","retrieveUserDetails","alert","error","message","token","Authorization","id","_id","isAdmin","onSubmit","children","className","fileName","_jsxFileName","lineNumber","columnNumber","Group","controlId","Label","Control","type","placeholder","value","onChange","target","required","variant","disabled","_c","$RefreshReg$"],"sources":["C:/Users/geral/Documents/csp3-b335-jove-bonafe/csp3-b335-jove-bonafe/src/pages/Login.js"],"sourcesContent":["import { Form, Button } from 'react-bootstrap';\r\nimport {useState, useEffect, useContext} from 'react';\r\nimport UserContext from '../UserContext';\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n\r\n\t// State hooks to store the values of the input fields\r\n\tconst [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    // State to determine whether submit button is enabled or not\r\n    const [isActive, setIsActive] = useState(true);\r\n\r\n    const { user, setUser } = useContext(UserContext);\r\n\r\n    // useEffect() will be triggered every time the state of email and password changes\r\n\tuseEffect(() => {\r\n\r\n        // Validation to enable submit button when all fields are populated and both passwords match\r\n        if(email !== '' && password !== ''){\r\n            setIsActive(true);\r\n        }else{\r\n            setIsActive(false);\r\n        }\r\n    }, [email, password]);\r\n\r\n    function authenticate(e) {\r\n\r\n        // Prevents page redirection via form submission\r\n        e.preventDefault();\r\n\r\n\t\tfetch('http://localhost:4004/b4/users/login',{\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\temail: email,\r\n\t\t\t\tpassword: password\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\t// successful login\r\n\t\t\tif(data.access){\r\n\r\n\t\t\t\tlocalStorage.setItem('access', data.access);\r\n\t\t\t\t// setUser(data); // user = {access: adskjaslkdqwk }\r\n\t\t\t\tretrieveUserDetails(data.access);\r\n\r\n\t\t\t\talert(`You are now logged in`);\r\n\r\n\t\t\t\r\n\t\t\t} else if (data.error == \"No Email Found\") {\r\n\r\n\t\t\t\talert(`Email not found`);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\talert(data.message)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// Clear input fields after submission\r\n\t\tsetEmail('');\r\n\t\tsetPassword('');\r\n\t}\r\n\r\n\tconst retrieveUserDetails = (token) => {\r\n\r\n\t\tfetch(\"http://localhost:4004/b4/users/details\", {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tsetUser({\r\n\t\t\t\tid: data._id,\r\n\t\t\t\tisAdmin: data.isAdmin\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log(user);\r\n\t\t})\r\n\t}\r\n\r\n    return ( \r\n\t\t    <Form onSubmit={(e) => authenticate(e)}>\r\n\t\t    \t<h1 className=\"my-5 text-center\">Login</h1>\r\n\t\t        <Form.Group controlId=\"userEmail\">\r\n\t\t            <Form.Label>Email address</Form.Label>\r\n\t\t            <Form.Control \r\n\t\t                type=\"email\" \r\n\t\t                placeholder=\"Enter email\"\r\n\t\t                value={email}\r\n\t\t    \t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t                required\r\n\t\t            />\r\n\t\t        </Form.Group>\r\n\r\n\t\t        <Form.Group controlId=\"password\">\r\n\t\t            <Form.Label>Password</Form.Label>\r\n\t\t            <Form.Control \r\n\t\t                type=\"password\" \r\n\t\t                placeholder=\"Password\"\r\n\t\t                value={password}\r\n\t\t    \t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t                required\r\n\t\t            />\r\n\t\t        </Form.Group>\r\n\r\n\t\t         { isActive ? \r\n\t                <Button variant=\"primary\" type=\"submit\" id=\"submitBtn\">\r\n\t                    Submit\r\n\t                </Button>\r\n\t                : \r\n\t                <Button variant=\"danger\" type=\"submit\" id=\"submitBtn\" disabled>\r\n\t                    Submit\r\n\t                </Button>\r\n\t            }\r\n\t\t    </Form>\r\n\t)\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}